<!DOCTYPE html>
<html>
<head>
    <title>test</title>
    <meta http-equiv=Content-Type content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
    <link rel="stylesheet" href="dist/css/default/yaxi.css" />
</head>
<body>

    <script type="text/javascript" src="dist/js/yaxi.js"></script>

    <script type="text/javascript">


        var Store = yaxi.store({
            name: '',
            age: 0
        });

        var Model = yaxi.model({
            width: '320px',
            text: '',
            displayText: function () {

                return this.text;
            },
            submodel: yaxi.model({

                value: 0
            }),
            store: Store
        });


        var model = {

            text: 11111.1222223,
            submodel: {
                value: 20
            },
            store: [
                { name: 1111, age: 1 },
                { name: 2222, age: 2 },
                { name: 3333, age: 3 }
            ]
        };



        new yaxi.Page().assign({

            // header: 'header',
            header: {
                Class: yaxi.Panel,
                children: [
                    {
                        Class: yaxi.BackButton,
                        text: 'header'
                    }
                ]
            },
            content: {
                Class: yaxi.Panel,
                model: model,
                children: [
                    {
                        Class: yaxi.Segment,
                        value: 50,
                        segments: 2
                    },
                    {
                        Class: yaxi.Repeater,
                        store: 'store',
                        template: {
                            Class: yaxi.Text,
                            line: 'bottom-1px',
                            style: {
                                display: 'block'
                            },
                            bindings: {
                                text: 'name'
                            }
                        }
                    },
                    {
                        Class: yaxi.Number,
                        min: 0,
                        max: 9,
                        value: 1,
                        button: true
                    },
                    {
                        Class: yaxi.TextBox,
                        bindings: {
                            value: 'text',
                            change: 'text'
                        }
                    },
                    {
                        Class: yaxi.TextBox,
                        value: 50,
                        bindings: {
                            value: 'submodel.value',
                            change: 'submodel.value'
                        }
                    },
                    {
                        Class: yaxi.GestureInput
                    },
                    {
                        Class: yaxi.IFrame,
                        src: 'iframe.html',
                        events: {
                            message: function (event) {

                            }
                        }
                    }
                ],
                pulldown: function (pulldown) {

                    setTimeout(function () {

                        pulldown.hide();

                    }, 3000);
                },
                // loading: function (loading) {

                //     setTimeout(function () {

                //         loading.hide();

                //     }, 3000);
                // }
            },
            footer: {
                Class: yaxi.Button,
                text: 'footer',
                style: {
                    height: '.45rem',
                    backgroundColor: yaxi.color.default5,
                    textAlign: 'center'
                },
                events: {
                    tap: handleTap
                }
            }

        }).open();



        function handleTap() {

            var template = `<Page v-header="header">
    <Content>
        <Text v-text="i18n.text" style="display:block;" />
        <HtmlControl>
            <div style="color:red;">html text</div>
        </HtmlControl>
        <Panel v-pulldown="onpulldown" style="width:100%;height:100%;">
        </Panel>
        <!-- <Require src=""></Require> -->
    </Content>
    <Footer e-change="change" v-model="model">
        <TextBox style="background-color:#888888;color:c-default3;width:b-width;" b-value="value" b-change="value" />
    </Footer>
</Page>`;

        template = require.template(template, 'dev/git/test.html').exports(
            {

                header: '模板窗口',

                model: {
                    value: 100,
                    width: '100%'
                },

                i18n: {
                    text: 'i18n'
                },

                onpulldown: function (pulldown) {

                    setTimeout(function () {

                        pulldown.hide();

                    }, 3000);
                }

            },
            {
                change: function () {
                    alert(this.model.value);
                }
            });

            new yaxi.Page().assign(template).open();
        }

    
    </script>

</body>
</html>