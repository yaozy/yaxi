"use strict";var yaxi=Object.create(null);"undefined"!=typeof module?(module.exports=yaxi,"undefined"!=typeof window&&(window.global=yaxi)):"undefined"!=typeof window&&(window.yaxi=yaxi),yaxi.impl=Object.create(null),yaxi.classes=Object.create(null),yaxi.exports=yaxi,Object.extend=function(t,e,i,n){if(this.sealed)throw new Error(this.typeName+" is sealed, can not be extended!");var r,s,o=this.prototype||null,a=Object.create(o);if("function"==typeof t?(n=i,i=e,e=t,t=""):!0===i&&(i=!(n=!0)),i?i.ctor=i:(i=function(){s&&s.apply(this,arguments)}).ctor=this.ctor,i.superclass=o?this:null,i.extend=this.extend||Object.extend,(i.prototype=a).constructor=i,a.__class_init&&a.__class_init(i),e&&(e.call(a,i,o,yaxi),s=i.ctor),t&&(r=yaxi.classes)){if(!n&&r[t])throw new Error('class name "'+t+'" has exists!');(n=yaxi.exports)&&(n[t]=i),r[i.typeName=a.typeName=t]=i,r[t=t.toLowerCase()]=i}return i},Function.prototype.bind||(Function.prototype.bind=function(e){var i=this;if(1<arguments.length){var n=[].slice.call(arguments,1),r=n.push;return function(){var t=n.slice(0);return 0<arguments.length&&r.apply(t,arguments),i.apply(e||this,t)}}return function(){return i.apply(e||this,arguments)}}),function(){var e=/([yMdhmsSq]+)/g,i={GMT:"toGMTString",ISO:"toISOString",UTC:"toUTCString",date:"toDateString",time:"toTimeString",locale:"toLocaleString","locale-date":"toLocaleDateString","locale-time":"toLocaleTimeString"},r={y:"getFullYear",d:"getDate",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"};this.format=function(t){var n;return t?(n=i[t])?this[n]():(n=this,t.replace(e,function(t,e){var i=e.length;switch(e=e.charAt(0)){case"M":e=n.getMonth()+1;break;case"q":e=(n.getMonth()+3)/3|0;break;default:e=n[r[e]]()}return e=""+e,1===i||(i-=e.length)<=0?e:"0000".substring(0,i)+e})):this.toString()},this.addHour=function(t){return(t|=0)&&this.setTime(this.getTime()+36e5*t),this},this.addMinute=function(t){return(t|=0)&&this.setTime(this.getTime()+6e4*t),this},this.addSecond=function(t){return(t|=0)&&this.setTime(this.getTime()+1e3*t),this},Date.create=function(t){if(t){var e=new Date(t),i=e.valueOf();if(i==i)return e;if("string"==typeof t&&(t=t.match(/\d+/g)))return i=0|t[1],new Date(t[0],0<i?i-1:0,0|t[2],0|t[3],0|t[4],0|t[5])}return null}}.call(Date.prototype),function(t){var e=Object.create(null),n=Object.create(null);e["&"]="&amp;",e["<"]="&lt;",e[">"]="&gt;",e["'"]="&apos;",e['"']="&quot;",n.amp="&",n.lt="<",n.gt=">",n.apos="'",n.quot='"',t.encode=function(t){if(t&&"string"==typeof t){var i=e;return t.replace(/([&<>'"])/g,function(t,e){return i[e]})}return""+t},t.decode=function(t){var i=n;return t&&t.replace(/&(\w+);/g,function(t,e){return i[e]||e})}}(yaxi.html=Object.create(null)),function(t){t.fromString=function(t,e){var i=new Blob([t],{type:"text/plain"}),t=new FileReader;t.onload=function(){e(this.result)},t.readAsArrayBuffer(i)},t.toString=function(t,e){var i=new FileReader;t=new Blob([t]),i.onload=function(){e(this.result)},i.readAsText(t,"utf-8")},t.fromBase64=function(t){for(var e=window.atob(t),i=e.length,n=new Uint8Array(i),r=0;r<i;++r)n[r]=e.charCodeAt(r);return n.buffer},t.toBase64=function(t){for(var e=new Uint8Array(t),i=e.byteLength,n=new Array(i),r=0;r<i;r++)n[r]=String.fromCharCode(e[r]);return window.btoa(n.join(""))}}(yaxi.buffer=Object.create(null)),function(t){var i=t.round,e=(0).toFixed,n=new r(0);function r(t){var e,i;return t&&(t instanceof r?(i=t.d,e=t.v):(t=+t)===t&&(e=t===(0|t)?t:(i=(e=(""+t).split("."))[1])?(i=i.length,+(e[0]+e[1])):(i=0,t))),this.v=e||0,this.d=i||0,this}r.singleton=r.bind(new r(0));var s=(yaxi.Decimal=r).prototype;s.clone=function(){var t=Object.create(s);return t.v=this.v,t.d=this.d,t},s.plus=function(t){var e,i;if(!t)return this;if(t instanceof r)i=t.d,t=t.v;else{if((t=+t)!==t)return this;t!==(0|t)&&(i=(t=(""+t).split("."))[1])?(i=i.length,t=+(t[0]+t[1])):i=0}return(e=this.d)>i?this.v+=t*("1e"+e)/("1e"+i):e<i?(this.d=i,this.v=this.v*("1e"+i)/("1e"+e)+t):this.v+=t,this},s.minus=function(t){return this.plus(-t)},s.mul=function(t){var e;if(!t)return this.v=this.d=0,this;if(!this.v)return this;if(t instanceof r)e=t.d,t=t.v;else{if((t=+t)!==t)return this;t!==(0|t)&&(e=(t=(""+t).split("."))[1])?(e=e.length,t=+(t[0]+t[1])):e=0}return t?(this.v*=t,this.d+=e):this.v=this.d=0,this},s.div=function(t){var e,i;if(!t)return this.v=this.d=0,this;if(!this.v)return this;if(t instanceof r)i=t.d,t=this.v/t.v;else{if((t=+t)!==t)return this.v=this.d=0,this;t!==(0|t)&&(i=(t=(""+t).split("."))[1])?(i=i.length,t=+(t[0]+t[1])):i=0}return t?(t=(e=this.d)!==i?i<e?this.v/(t*("1e"+(e-i))):this.v*("1e"+(i-e))/t:this.v/t,t=r.call(n,t),this.v=t.v,this.d=t.d):this.v=this.d=0,this},s.pow10=function(t){if(t|=0){var e;if(!this.v)return this;0<t?(e=this.d)<t?(this.d=0,this.v*="1e"+(t-e)):t===e?this.d=0:this.d-=t:this.d-=t}return this},s.round=function(t){var e=this.d;return(t|=0)<e&&(this.v=i(this.v/("1e"+(e-t))),this.d=t),this},s.toFixed=function(t){var e=this.d,i=this.v;return 0<e&&(i/="1e"+e),i.toFixed(t)},s.toString=function(t){var e=this.d,i=this.v;return 0<e&&(i/="1e"+e),i.toString(t)},Object.defineProperty(s,"value",{get:s.valueOf=function(){var t=this.d,e=this.v;return 0<t&&(e/="1e"+t),e}});var o=Number.prototype;function a(t,e){return t!=t?0:0<(e|=0)?i(t*(e="1e"+e))/e:i(t)}"1.11"===1.115.toFixed(2)&&(o.toFixed=function(t){return e.call(a(+this,t|=0),t)}),o.round=function(t){return a(+this,t)},t.round=a}(Math),yaxi.impl.property=function(t){var r=Object.defineProperty,s=Object.create(null);return s.boolean=function(t){return!!t&&"false"!==t},s.integer=function(t){return 0|t},s.number=function(t){return+t||0},s.string=function(t){return""+t},s.date=function(t){return Date.create(t)},function(e,t,i){if(/[^\w-]/.test(e))throw new Error('define property error: "'+e+'" not a valid property name!');var n=this.$properties;this.$defaults[e]=t=null!=t?t:null,i&&"object"==typeof i?(i.name=e,i.type||(i.type=typeof t),i.kind||(i.kind="field"),i.change=!1!==i.change):i={name:e,type:typeof t,kind:"field",change:!1!==i},i.defaultValue=t,i.get?(i.change=!1,i.convert||(i.convert=null),i.set||(i.set=function(){var t=this.typeName;throw new Error('property "'+e+'"'+(t?" of "+t:"")+" is readonly!")})):(void 0===i.convert&&(i.convert=s[i.type]),i.get=this.__build_get(e,i),i.set||(i.set=this.__build_set(e,i))),r(this,e,n[e]=i),(t=i.alias)&&t!==e&&r(this,t,n[t]=i)}},yaxi.Event=Object.extend.call({},function(t){this.type="",this.target=null,this.cancelBubble=!1,this.defaultPrevented=!1,this.stop=function(){this.cancelBubble=!0},this.prevent=function(){this.defaultPrevented=!0}},function(t,e){this.type=t,e&&(this.detail=e)}),yaxi.EventTarget=Object.extend(function(t,e,i){var h=i.Event,n=this;this.on=function(t,e){var i,n;t&&"function"==typeof e&&((i=this.__event_keys)?(n=i[t])?n.push(e):n=i[t]=[e]:n=(i=this.__event_keys={})[t]=[e],(e=this.__event_change)&&this.__event_change(t,n,!0))},this.once=function(e,i){var n;"function"==typeof i&&(n=function(t){i.call(this,t),this.off(e,n)},this.on(e,n))},this.off=function(t,e){var i,n=this.__event_keys;if(n)if(t){if(i=n[t]){if(e){for(var r=i.length;r--;)i[r]===e&&i.splice(r,1);i[0]||(n[t]=null)}else i.length=0,n[t]=null;(e=this.__event_change)&&e.call(this,t,i,!1)}}else for(t in n)this.off(t)},this.trigger=function(t,e,i){var n,r,s,o,a=this;if(!t)return!1;"object"==typeof t?s=t.type:t=new h(s=""+t),t.target=this,void 0!==e&&(t.detail=e);do{if((n=a.__event_keys)&&(n=n[s]))for(r=0;o=n[r++];)if(!1===o.call(t.source=a,t)&&(t.defaultPrevented=!0),t.cancelBubble)return!t.defaultPrevented;if(!1===i)break;a.__shadow&&(t.target=a.parent)}while(a=a.parent);return!t.defaultPrevented},this.hasEvent=function(t,e){var i,n=this.__event_keys;if(n&&(i=n[t])&&i[0]){if(!e)return!0;for(var r=i.length;r--;)if(i[r]===e)return!0}return!1},(t.mixin=function(t){t.on=n.on,t.once=n.once,t.off=n.off,t.trigger=n.trigger,t.hasEvent=n.hasEvent})(i)}),yaxi.Stream=Object.extend(function(s){s.fromPromise=function(t){var e=new s;return"function"==typeof t&&(t=t()),t.then(function(t){e.resolve(t)}).catch(function(t){e.reject(t)}),e},s.interval=function(e){var i=new s,n=0;return function t(){setTimeout(function(){i.resolve(n++),t()},0|e)}(),i},s.all=function(){for(var t,i=new s,n=[],e=0,r=0;t=arguments[e];)r++,function(e){t.then(function(t){n[e]=t,--r||i.resolve(n)}).catch(function(t){i.reject(t)})}(e++);return i},this.registry=function(t){var e=this.__next=new s,i=this.__cache;if(this.__fn=t,i){for(;0<i.length;)try{t.call(this,i.shift(),e)}catch(t){this.reject(t)}this.__cache=null}return e},this.resolve=function(t){var e,i=this.__next;if(i)if(e=this.__fn)try{e.call(this,t,i)}catch(t){this.reject(t)}else i.resolve(t);else(e=this.__cache)?e.push(t):this.__cache=[t]},this.reject=function(e){var t=this.__fail,i=this.__next;if(t)try{if(!1===t.call(this,e,i))return!1}catch(t){e=t}if(!i)throw e;i.reject(e)},this.then=function(n){return this.registry(function(t,e){var i;!n||void 0!==(i=n(t))&&(t=i),e.resolve(t)})},this.combine=function(t){return this.registry(function(i,n){t.then(function(t){var e=i;e instanceof Array?e.push(t):e=[i,t],n.resolve(e)}).catch(function(t){n.reject(t)})})},this.map=function(i){return this.registry(function(t,e){e.resolve(i(t))})},this.json=function(i){return this.registry(function(t,e){"string"==typeof t&&(t=JSON.parse(t)),i&&(t=i(t)),e.resolve(t)})},this.catch=function(t){return this.__fail=t,this.__next=new s},this.wait=function(i){var n,r=[];return this.registry(function(t,e){n?r.push(t):n=setTimeout(function(){e.resolve(r),n=0,r=[]},0|i)})},this.delay=function(i){return this.registry(function(t,e){setTimeout(function(){e.resolve(t)},0|i)})},this.debounce=function(i){var n;return this.registry(function(t,e){n&&clearTimeout(n),n=setTimeout(function(){e.resolve(t),n=0},0|i)})},this.throttle=function(i){var n;return this.registry(function(t,e){n||(e.resolve(t),n=setTimeout(function(){n=0},0|i))})}},function(t){0<arguments.length&&("function"==typeof t?t(this):this.__cache=[t])}),yaxi.http=Object.extend.call({},function(h){function l(t){if(!t)return"";var e,i,n,r=[],s=encodeURIComponent;for(n in t)if(e=t[n],n=s(n),null!==e)switch(typeof e){case"undefined":r.push(n,"=&");break;case"boolean":case"number":r.push(n,"=",e,"&");break;case"string":case"function":r.push(n,"=",s(e),"&");break;default:if(e instanceof Array)for(var o=0,a=e.length;o<a;o++)void 0===(i=e[o])?r.push(n,"=&"):r.push(n,"=",s(i),"&");else r.push(n,"=",l(e),"&")}else r.push(n,"=null","&");return r.pop(),r.join("")}function r(t,e,i,n,r){return h.mock?(s=e,o=i,a=new yaxi.Stream,setTimeout(function(){try{var t=require("../../mock/"+s);"function"==typeof t?a.resolve(t(o)):a.resolve(t)}catch(t){console.error(t),a.reject(s+"\n"+t)}},500),a):(!i||i instanceof FormData||(r||/GET|HEAD|OPTIONS/i.test(t)?(e=e+(0<=e.indexOf("?")?"&":"?")+l(i),i=null):"application/x-www-form-urlencoded"===n.contentType?i=l(i):"string"!=typeof i&&(n.contentType||(n.contentType="application/json"),i=JSON.stringify(i))),n.method=t,n.url=e,n.data=i,n.timeout=n.timeout||h.timeout,yaxi.__ajax_send(n));var s,o,a}h.timeout=1e4,h.send=function(t,e,i,n){return r(t?t.toUpperCase():"GET",e,i,n||{})},h.options=function(t,e,i){return r("OPTIONS",t,e,i||{},!0)},h.head=function(t,e,i){return r("HEAD",t,e,i||{},!0)},h.get=function(t,e,i){return r("GET",t,e,i||{},!0)},h.post=function(t,e,i){return r("POST",t,e,i||{})},h.put=function(t,e,i){return r("PUT",t,e,i||{})},h.delete=function(t,e,i){return r("DELETE",t,e,i||{})},h.trace=function(t,e,i){return r("TRACE",t,e,i||{})},h.connect=function(t,e,i){return r("CONNECT",t,e,i||{})}}),function(i){var h=Object.create,l="black,white,standard,thick,thicker,thickest,light,lighter,lightest,primary,secondary,important,success,warning,danger,disabled".split(",");function n(t,e,i){for(var n=l,r=h(null),s=(i=i.split(",")).length;s--;){var o=n[s],a="#"+i[s];r[o]=a,t[e+"-"+o]=a}t[e]=r}i.load=function(t,e){t=yaxi.color=i[t]=h(null);n(t,"bg",e[0]),n(t,"text",e[1]),n(t,"line",e[2])}}(yaxi.colors=Object.create(null)),yaxi.colors.load("blue",["000000,ffffff,ffffff,f5f5f5,e0e0e0,bdbdbd,ffffff,ffffff,ffffff,1c86ee,5eaadd,ff6c6c,71c04a,e89518,c40606,eeeeee","000000,ffffff,212121,181818,121212,000000,37474f,616161,9e9e9e,1c86ee,5eaadd,ff6c6c,71c04a,e89518,c40606,999999","000000,ffffff,263238,212121,121212,000000,37474f,546e7a,78909c,1c86ee,5eaadd,ff6c6c,71c04a,e89518,c40606,999999"]),function(t){var h=Object.create(null),i=Object.create(null),n=t.Decimal.singleton;function r(t){return t}function e(t){var e=t&&function(t){for(var e,i,n=t.split("|"),r=[],s=0,o=n.length;s<o;s++)if(n[s]&&(e=n[s].match(/"(?:[^"]|\\")"|[^:\s]+/g))&&(i=e[0])){if(!(i=h[i]))throw new Error('compile pipe error: not exist pipe function "'+e[0]+'"!');e[0]=null;for(var a=e.length-1;0<a;a--)'"'===(t=e[a])[0]&&'"'===t[t.length-1]&&(e[a]=t.slice(1,-1).replace(/\\"/g,'"'));r.push(i,e)}return r}(t);return i[t]=e&&e[0]?function(t){for(var e,i,n=0;e=this[n++];)(i=this[n++])[0]=t,t=e.apply(this,i);return t}.bind(e):r}h.round=function(t,e){return n(t).round(e)},h.fixed=function(t,e){return n(t).toFixed(e)},t.pipe=function(t,e){t&&"function"==typeof e&&(h[t]=e)},t.pipe.compile=function(t){return i[t]||e(t)}}(yaxi),function(o){var a=Object.create,h=Object.defineProperty,s=o.pipe.compile,l=o.$controls=new Array(2<<19),r=null,c=this,u=o.impl.property();function i(t,e,i,n){var r,s;(r=t.__bindings)?(s=r[e])?s.push(i):r[e]=[i]:(t.__bindings=a(null))[e]=[i],(r=n.__bindings)?r.push(e,t):n.__bindings=[e,t]}function f(t){for(var e,i,n,r=0;e=t[r++];)(i=l[e.control])?(n=e.fn)&&(i[e.property]=n(s)):t.splice(--r,1)}function d(i,n){return i="__sub_"+i,{get:function(){return this[i]||(this[i]=new n(this))},set:function(t){var e=this[i];t?(e||(this[i]=new n(this))).$assign(t):e&&e.$clear()}}}function _(e,i){return e="__sub_"+e,{get:function(){return this[e]||(this[e]=new i(this))},set:function(t){(this[e]||(this[e]=new i(this))).load(t)}}}o.model=function(t){var e=a,i=e(c),n=i.$subkeys=e(null),r=i.$defaults=e(null);function s(t){this.$parent=t||null,this.__fields=e(r)}return i.$properties=e(null),s.model=i.__model_type=1,function(t,e,i){var n,r,s;for(s in e){if("$"===s[0]||"_"===s[0]&&"_"===s[1])throw new Error('define model error: model field can not use "$" or "__" to begin!');if(n=e[s])switch(typeof n){case"function":(r=n.model)?(h(t,s,(1===r?d:_)(s,n)),i[s]=r):h(t,s,{get:n});break;case"object":n instanceof Array?h(t,s,_(s,r=function(t){if(1!==t.length&&!t[0]||"object"!=typeof t[0])throw new Error("define model error: sub array model must be a none empty object only!");return o.arrayModel(t[0])}(n))):h(t,s,d(s,r=o.model(n))),i[s]=r;break;default:u.call(t,s,n)}else u.call(t,s,n)}}(s.prototype=i,t,n),s},this.__build_get=function(e){return function(){var t;return r&&(t=l[r.control])&&i(this,e,r,t),this.__fields[e]}},this.__build_set=function(i,t){var n,r=t.convert;return function(t){var e=this.__fields;if(r&&(t=r(t)),t===e[i]||(n=this.__watches)&&n[i]&&!1===this.$notify(i,t))return this;e[i]=t,(t=this.__bindings)&&(t=t[i])&&f(t)}},this.__index=-1,h(this,"$index",{get:function(){var t;return r&&(t=l[r.control])&&i(this,"$index",r,t),this.__index},set:function(t){this.__index!==(t|=0)&&(this.__index=t,(t=this.__bindings)&&(t=t.$index)&&f(t))}}),h(this,"$top",{get:function(){for(var t,e=this;t=e.$parent;)e=t;return e}}),o.$bind=function(t){try{var e,i,n=this.uuid;for(i in t)if(e=t[i]){if("function"!=typeof e)throw new Error('bind error: binding expression "'+e+'" is not a function!');"onchange"===i?this.__onchange=e:(r=o.__bindingTarget={control:n,property:i,fn:e},this[i]=e(s))}}finally{r=o.__bindingTarget=null}},this.$unbind=function(t,e){var i=this.__bindings;if(i=i&&i[t])for(var n=i.length;n--;)if(i[n].control===e){i.splice(n,1);break}},this.$watch=function(t,e){var i,n;t&&"function"==typeof e&&((i=this.__watches)?(n=i[t])?n.push(e):i[t]=[e]:(this.__watches||(this.__watches=a(null)))[t]=[e])},this.$unwatch=function(t,e){var i,n;if(i=this.__watches)if("function"==typeof e){if(n=i[t])for(var r=n.length;r--;)if(n[r]===e)return void n.splice(r,1)}else if(t)(n=i[t])&&0<n.length&&(n.length=0,delete i[t]);else{for(t in i)i[t].length=0;this.__watches=null}},this.$notify=function(t,e){for(var i,n,r,s,o=this;o;){if((i=this.__watches)&&(n=i[t]))for(r=0;s=n[r++];)if(!1===s.call(o,this,e))return!1;o=o.$parent}},this.$sync=function(t){var e=this.__bindings;(e=e&&e[t])&&f(e)},this.$assign=function(t){if(t)for(var e in t=t.__fields||t)this[e]=t[e]},this.$clear=function(t){var e,i;if(this.__fields=a(this.$defaults),t&&(e=this.$subkeys))for(var n in e)(i=this["__sub_"+n])&&(1===e[n]?i.$clear():i.clear())}}.call(Object.create(null),yaxi),function(){var n=Object.create,h=Array,s=h.prototype,r=this,l=yaxi.$controls;function o(t,e,i){var n,r=t.$Model,s=t.$parent,o=e.length;i=null!=i?((n=new h(o+2))[0]=i,n[1]=0,2):(n=new h(o),0);for(var a=0;a<o;a++)n[i+a]=c(s,r,e[a]);return n}function c(t,e,i){var n;return i instanceof e?(n=i).$parent=t:(n=new e(t)).$assign(i),n}function a(t,e){var i;for(e|=0;i=t[e];){var n=i.__index;null==n?i.__index=e:n!==e&&(i.$index=e),e++}}function u(t,e,i,n){var r,s;if(r=t.__bindings)for(var o=0,a=r.length;o<a;o++)(s=l[r[o]])&&s[e](i,n)}function f(t){var e,i;if(e=t.__bindings)for(var n in t.__bindings=null,e)for(var r=e[n],s=r.length;s--;)(i=l[r[s].control])&&i.__unbind(t);t.$parent=null}var d=!(yaxi.arrayModel=function(t){var e=n(r);function i(t){this.$parent=t||null}return t=t||{},e.$Model=yaxi.model(t),i.model=e.__model_type=2,i.prototype=e,i});this.__length=0,Object.defineProperty(this,"length",{get:function(){return this.__length},set:function(t){if(!d)throw new Error("length is readonly!");this.__length=t,d=!1}}),this.indexOf=function(t){return s.indexOf.call(this,t)},this.lastIndexOf=function(t){return s.lastIndexOf.call(this,t)},this.forEach=function(t){return s.forEach.apply(this,arguments)},this.filter=function(t){return s.filter.apply(this,arguments)},this.map=function(t){return s.map.apply(this,arguments)},this.reduce=function(t,e){return s.reduce.apply(this,arguments)},this.reduceRight=function(t,e){return s.reduceRight.apply(this,arguments)},this.create=function(t){var e=new this.$Model;return t&&e.$assign(t),e},this.copy=function(t){var e=new this.$Model;return(t=this[t])&&e.$assign(t.__fields),e},this.load=function(t){var e=this.__length;if(0<e){for(;e--;)f(this[e]);d=!0,s.splice.call(this,0)}if(0<t.length){t=o(this,t),d=!0,s.push.apply(this,t);for(var i=t.length;i--;)t[i].__index=i}u(this,"__on_load",t)},this.set=function(t,e){var i;if((t|=0)<0&&(t+=this.__length),!(i=this[t]))return!1;f(i),i=this[t]=c(this.$parent,this.$Model,e),u(this,"__on_set",t,i)},this.append=function(){if(0<arguments.length){var t,e=this.__length,i=o(this,arguments);for(d=!0,s.push.apply(this,i);t=this[e];)t.__index=e++;u(this,"__on_insert",-1,i)}},this.insert=function(t){var e;1<arguments.length&&(e=this.__length,(t|=0)<0&&(t+=e)<0?t=0:e<t&&(t=e),e=o(this,e=s.slice.call(arguments,1),t),d=!0,s.splice.apply(this,e),a(this,t),u(this,"__on_insert",t,e.slice(2)))},this.removeAt=function(t,e){var i,n=this.__length;if((t|=0)<0&&(t+=n)<0)t=0;else if(n<=t)return!1;if(d=!0,!(0<(n=(i=s.splice.call(this,t,e||1)).length)))return!1;for(var r=n;r--;)f(i[r]);a(this,t),u(this,"__on_removeAt",t,n)},this.remove=function(t){t=this.indexOf(t);0<=t&&this.removeAt(t,1)},this.clear=function(){if(0<this.__length){for(var t=this.__length;t--;)f(this[t]);d=!0,s.splice.call(this,0),u(this,"__on_clear")}},this.sort=function(t){s.sort.call(this,t),a(this,0),u(this,"__on_sort")},this.reverse=function(){s.reverse.call(this),a(this,0),u(this,"__on_reverse")}}.call(Object.create(null)),Object.extend.call(Array,function(s,t){var c=Object.create,i=yaxi.classes,o=c(null);function a(t){for(var e,i,n=t.match(/("[^"]*"|'[^']*'|>>|<<|[<>#.@*\[\]]|[!=]==?|[\w-]+)/g),r=[],s=0;e=n[s++];)if("<"===(i=e[0])||">"===i)if(r.push(e),i=n[s++])switch(i){case"@":case"#":case".":((e=n[s++])[0]<"0"||"z"<e[0])&&h(i,s-2," , "+i+' must be followed alphabet or number or "_"'),r.push([i,e]);break;case"*":r.push(i);break;case"[":"=="!==(e=n[s+1])&&"!="!==e&&"==="!==e&&"!=="!==e?h(i,s,' [] only support "==" or "!=" or "===" or "!=="'):"]"!==n[s+3]&&h(i,s," [] not properly closed"),r.push(["[]",e,function(t){var e;switch(t){case"undefined":return;case"null":return null;case"true":return!0;case"false":return!1}return"'"!==t[0]&&'"'!==t[0]?(e=+t)==e?e:t:t.substring(0,t.length-1)}(n[s+2])]),s+=4;break;default:i[0]<"A"||"z"<i[0]?h(e,s,e+' must be followed "@" or "#" or "." or "[x==y]" or "*" or a type name'):r.push(["",i])}else h(e,s," ");else h(e,s,'must use "<<" or "<" or ">>" or ">" as relation symbol');return o[t]=r}function h(t,e,i){throw new Error("selector is invalid, "+t+" at "+e+", "+i+"!")}function l(t,e){switch(e[0]){case"@":return t.__fields.key===e[1];case"":return t instanceof(i[e[1]]||Boolean);case"#":return t.__fields.id===e[1];case"[":return function(t,e){var i=t[e[0]],t=e[2];switch(e[1]){case"==":return i==t;case"!=":return i!=t;case"===":return i===t;case"!==":return i!==t;default:return}}(t,e);case"*":return 1}}function u(t,e,i){if(t=t.parent)if(i){do{if(l(t,e))return t}while(t=t.parent)}else if(l(t,e))return t}function f(t,e,i){for(var n,r,s=0;n=t[s++];){if(l(n,e))return n;if(i&&(r=n.__children)&&r[0]&&(n=f(r,e,!0)))return n}}function d(t,e,i,n,r){for(var s,o,a=0;s=t[a++];)l(s,i)&&!r[o=s.uuid]&&(r[o]=!0,e.push(s)),n&&(o=s.__children)&&o[0]&&d(o,e,i,!0,r)}yaxi.impl.find=function(){this.find=function(t){return function(t,e){var i;if(e&&(i=o[e]||a(e))&&i[0])return function t(e,i,n){var r=i[n+1];var s;switch(i[n]){case"<":e=u(e,r,!1);break;case"<<":e=u(e,r,!0);break;case">":e=(s=e.__children)&&s[0]&&f(s,r,!1)||null;break;case">>":e=(s=e.__children)&&s[0]&&f(s,r,!0)||null}if(e&&i[n+=2])return t(e,i,n);return e||null}(t,i,0);return null}(this,t)}},yaxi.impl.query=function(){this.parentToThis=function(t){var e;if(!t||t===this)return null;for(;(e=t.parent)&&e!==this;)t=e;return t||null},this.findByKey=function(t){for(var e,i=this.__children,n=0;e=i[n++];){if(e.key===t&&-1<=e.selectedIndex)return e;if(e.__children&&(e=e.findByKey(t)))return e}},this.query=function(t){return function(t,e){var i,n,r=new s;e&&(n=t.__children)&&n[0]&&(i=o[e]||a(e))&&i[0]&&0<(n=function t(e,i,n){var r=c(null);var s=[];var o=i[n+1];var a=0;var h,l;switch(i[n]){case"<":for(;h=e[a++];)(h=u(h,o,!1))&&!r[l=h.uuid]&&(r[l]=!0,s.push(h));break;case"<<":for(;h=e[a++];)(h=u(h,o,!0))&&!r[l=h.uuid]&&(r[l]=!0,s.push(h));break;case">":for(;h=e[a++];)(l=h.__children)&&l[0]&&d(l,s,o,!1,r);break;case">>":for(;h=e[a++];)(l=h.__children)&&l[0]&&d(l,s,o,!0,r)}if(0<s.length&&i[n+=2])return t(s,i,n);return s}([t],i,0)).length&&r.push.apply(r,n);return r}(this,t)}},this.filter=function(t){if("function"==typeof t)for(var e=this.length;e--;)t(this[e])||this.splice(e,1);else if(t=o[t]||a(t))for(e=this.length;e--;)this[e].__find(t,0)||this.splice(e,1);return this},this.get=function(t){for(var e,i=0;e=this[i++];)if(void 0!==(e=e[t]))return e},this.set=function(t,e){for(var i,n=0;i=this[n++];)i[t]=e;return this},this.call=function(t,e){for(var i,n,r=0;i=this[r++];)(n=i[t])&&n.apply(i,e);return this},this.on=function(t,e){for(var i,n=0;i=this[n++];)i.on(t,e);return this},this.once=function(t,e){for(var i,n=0;i=this[n++];)i.once(t,e);return this},this.off=function(t,e){for(var i,n=0;i=this[n++];)i.off(t,e);return this},this.trigger=function(t){for(var e,i=0;e=this[i++];)e.trigger(t);return this}}),Object.extend.call({},"Control",function(s,t,n){var a=Object.create,c=Object.getOwnPropertyNames,o=n.classes,i=n.__patches=[],r=0;s.allowParent=!0,s.renderer=v;var h=n.patch=function(t){var e;for(t.__dirty=!0;e=t.parent;){if(e.__dirty)return;e.__dirty=!0,t=e}i.push(t),r=r||setTimeout(l,0)};function l(){n.__on_page_patch(i),r=i.length=0}function u(t){throw new Error("create control error: "+t)}function f(t,e){var i;t||u("type can not be null!"),(i=t.allowParent)?!0===i||i(e=e||n.Box.prototype)||u(t.typeName+" can not be a sub type of "+e.typeName+"!"):(i=t.typeName)?u(i+" can not be a sub type!"):u(JSON.stringify(t).substring(0,20)+"... not a valid type!")}s.build=function(t,e,i){var n,r;if(e){if(e instanceof s)return e.__slot?e:(f((r=e).constructor,t),r.parent&&r.parent!==t&&r.remove(),r.parent=t,r);if(n=e[0])return"string"!=typeof n||(n=o[n])||("slot"===e[0]&&u("can only use slot in component!"),u('"'+e[0]+"\" doesn't register!")),f(n,t),(r=new n).parent=t,r.__load(e,i),r}u('no options, eg: ["box", { theme: "text-primary" }, [[...], ...]]')},this.$defaults=a(null),this.$properties=a(null),this.$renderer=a(null),this.__dirty=!0,this.$=this.property=n.impl.property(),this.__build_get=function(t,e){return e.change?function(){return(this.__changes||this.__fields)[t]}:function(){return this.__fields[t]}},this.__build_set=function(t,e){return(e.change?function(n,r){var s=a,o="__set_"+n;return function(t){var e,i;r&&(t=r.call(this,t)),(e=this.__changes)?t!==(i=e[n])&&(e[n]=t,this[o]&&!1===this[o](t,i)&&(this.__fields[n]===i?delete e[n]:e[n]=i)):t!==(i=this.__fields)[n]&&((this.__changes=s(i))[n]=t,this[o]&&!1===this[o](t,i[n])?this.__changes=null:this.__dirty||h(this))}}:function(n,r){var s="__set_"+n;return function(t){var e=this.__fields,i=e[n];r&&(t=r.call(this,t)),t!==i&&(e[n]=t,this[s]&&!1===this[s](t,i)&&(e[n]=i))}})(t,e.convert)},this.$set=function(t,e,i){var n;(n=this.__changes)?n[t]=e:(n=this.__fields)&&(i||e!==n[t])&&((this.__changes=a(n))[t]=e,this.__dirty||h(this))};var d=1,_=n.$controls;function e(t,e){var i;if(i=t.__save_status){for(var n in i){var r=i[n];t[n]===r[1]&&(t[n]=r[0])}i=null}if(e)for(var n in i={},e){var s=t[n];t[n]=e[n],i[n]=[s,t[n]]}t.__save_status=i}this.$("uuid",0,{get:function(){return this.__uuid||((_[d]=this).__uuid=d++)}}),this.__shrink_uuid=function(){for(var t=_,e=0,i=d;i--;){if(t[i])return void(d-=e);e++}},this.$("id","",!1),this.$("theme","",{kind:"class",data:"yx-theme-"}),this.$("slot","",!1),this.$("hidden",!1),this.$("selected",!1,{change:!1,get:function(){return this.__selected||!1},set:function(t){(t=!!t)!==this.__selected&&((this.__selected=t)&&(t=this.__selected_status)?e(this,t):this.__save_status&&e(this))}}),this.$("selectedStatus",null,{change:!1,alias:"selected-status",get:function(){return this.__selected_status||null},set:function(t){this.__selected_status=t,this.__selected&&e(this,t)}}),this.$("key","",!1),this.$("tag",null,!1),this.parent=null,this.$("root",null,{get:function(){for(var t,e=this;t=e.parent;)e=t;return e}}),this.$("absolute","",{kind:"class",data:"yx-absolute-"}),this.$("static",!1,{kind:"class",data:"yx-static"});var p=function(t,e,i){var n=t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()});this.$(n,"",{alias:t,kind:"style",data:0|i,layout:!!e})}.bind(this);p("overflow",1),p("overflow-x",1),p("overflow-y",1),p("top",0,1),p("right",0,1),p("bottom",0,1),p("left",0,1),p("width",0,1),p("height",0,1),p("min-width",0,1),p("max-width",0,1),p("min-height",0,1),p("max-height",0,1),p("margin",0,1),p("margin-top",0,1),p("margin-right",0,1),p("margin-bottom",0,1),p("margin-left",0,1),p("border",0,3),p("border-top",0,3),p("border-right",0,3),p("border-bottom",0,3),p("border-left",0,3),p("padding",1,1),p("padding-top",1,1),p("padding-right",1,1),p("padding-bottom",1,1),p("padding-left",1,1),p("flex-direction",1),p("flex-wrap",1),p("flex-flow",1),p("justify-content",1),p("align-items",1),p("align-content",1),p("order",0),p("flex-grow",0),p("flex-shrink",0),p("flex-basis",0),p("flex",0),p("align-self",0),p("justify-self",0),p("z-index",0),p("text-align",1),p("outline",0,3),p("outline-color",0,2),p("outline-style",0),p("outline-offset",0,1),p("outline-width",0,1),p("box-shadow",0,3),p("border-width",0,1),p("border-top-width",0,1),p("border-right-width",0,1),p("border-bottom-width",0,1),p("border-left-width",0,1),p("border-style",0),p("border-top-style",0),p("border-right-style",0),p("border-bottom-style",0),p("border-left-style",0),p("border-color",0,2),p("border-top-color",0,2),p("border-right-color",0,2),p("border-bottom-color",0,2),p("border-left-color",0,2),p("border-radius",0,1),p("border-top-left-radius",0,1),p("border-top-right-radius",0,1),p("border-bottom-left-radius",0,1),p("border-bottom-right-radius",0,1),p("direction",0),p("opacity",0),p("background",0,2),p("background-color",0,2),p("background-image",0),p("background-repeat",0),p("background-position",0,1),p("color",1,2),p("font",1,3),p("font-style",1),p("font-variant",1),p("font-weight",1),p("font-size",1,1),p("line-height",1,1),p("font-family",1),p("white-space",1,1),p("word-spacing",1,1),p("letter-spacing",1,1),p("text-indent",1),p("text-decoration",1),p("text-overflow",1),p("text-shadow",1,3),p("transform",0,1),p("transform-origin",0,1),p("transform-style",0),p("transform-box",0),p("transition",0),p("transition-delay",0),p("transition-duration",0),p("transition-property",0),p("transition-timing-function",0),p("animation",0),p("animation-delay",0),p("animation-direction",0),p("animation-duration",0),p("animation-fill-mode",0),p("animation-iteration-count",0),p("animation-name",0),p("animation-play-state",0),p("animation-timing-function",0);var p=Array,y=[0,new p(20),new p(20),0,new p(200),new p(200),0,new p(100),new p(100)],g=function(t,e){return e?(""+e).replace(this,t):""}.bind(/@([\w-]+)/g,function(t,e){return this[e]}.bind(n.color)),x=/\s+/g;function v(t){var e=this.prototype,i=this.superclass;(i=i&&i.prototype)&&(i=i.$renderer),t.call(e.$renderer,i||null,e,n)}this.__get_changes=function(t,e){var i,n,r,s,o=this.$properties,a=c(t=t||this.__changes),h=y,l=0;for(h[0]=h[3]=h[6]=0;n=a[l++];)if(r=t[n],i=o[n]){if(i.change)switch(i.kind){case"class":r=r?(s=" "+i.data,"string"===i.type?s+r.replace(x,s):s):"",s=h[0]++,h[1][s]=i,h[2][s]=r;break;case"style":!0&i.data&&(r=g(r)),s=h[3]++,h[4][s]=i,h[5][s]=r;break;default:s=h[6]++,h[7][s]=i,h[8][s]=r}}else e&&(s=h[6]++,h[7][s]=n,h[8][s]=r);return h},this.__load=function(t,e){var i,n;return(i=t[1])&&this.__load_attributes(i),(i=t[2])&&(n=this.__load_children)&&n.call(this,i,e),this},this.__load_attributes=function(t){var e,i,n,r,s,o=this.$properties;for(s in t)r=t[s],(e=o[s])?(s=e.name,(n=e.convert)?(r=n.call(this,r),s&&(e.change?(i=i||(this.__changes=a(this.__fields)))[s]=r:(e.force?this:this.__fields)[s]=r)):!1!==n&&(this[s]=r)):this[s]=r},this.load=function(t){this.__load(t)},this.loadTemplate=function(t,e,i){this.__load(t.call(this,e,i))},this.$properties.bindings={convert:n.$bind},this.$push=function(t){var e;(e=this.__onchange)&&e(t)},this.pipe=n.pipe.compile,n.impl.find.call(this),this.lookupHasKey=function(){var t=this;do{if(t.key)return t}while(t=t.parent)},this.lookupHasTag=function(){var t=this;do{if(null!=t.tag)return t}while(t=t.parent)},n.EventTarget.mixin(this),this.$properties.events={convert:function(t){for(var e in t)this.on(e,t[e])}},n.boundingClientRects=function(t,n){if(t&&0<t.length&&n)for(var r=t.length,e=0;t[e];)t[e].boundingClientRect(function(e,i){return function(t){e[i]=t,--r||n.apply(this,e)}}(t,e++))},this.remove=function(){var t,e,i=this.parent;i&&(t=i.__children)&&0<=(e=t.indexOf(this))&&(this.__slot&&(this.__slot=!1),t.splice(e,1))},this.__unbind=function(t){var e;if(e=this.__bindings)for(var i=e.length;i--;)e[i]===t&&e.splice(i-1,2),i--},this.destroy=function(){var t,e;if((e=this.__uuid)&&(_[e]=null,t=this.__bindings)){for(var i=t.length;i--;)t[i--].$unbind(t[i],e);this.__bindings=null}this.__event_keys&&this.off(),this.$view=null,this.ondestroy&&this.ondestroy(),this.parent=this.__onchange=this.__scope=this.__po=null},this.destroyChildren=function(t){for(var e,i,n=t.length;n--;)(e=t[n])&&!e.parent?e.destroy():i=!0;return i},this.__class_init=function(t){t.allowParent=!0,t.renderer=v,this.$defaults=a(this.$defaults),this.$properties=a(this.$properties),this.$renderer=a(this.$renderer)}},function(){var t;this.__fields=Object.create(this.$defaults),(t=this.init)&&t.apply(this,arguments)}),yaxi.Collection=Object.extend.call({},function(t){var o=Array,s=o.prototype,e=yaxi.patch,a=yaxi.$controls,h=yaxi.Control.build,l=!1;function c(t){t.__last=s.slice.call(t,0),(t=a[t.$uuid])&&(t.__dirty||e(t))}function i(t,e,i,n){for(var r=e.length,s=new o(r+n);i<r;)s[i+n]=h(t,e[i++]);return s}this.__length=0,Object.defineProperty(this,"length",{get:function(){return this.__length},set:function(t){if(!l)throw new Error("the length of collection is readonly!");l=!1,this.__length=t}}),this.indexOf=s.indexOf,this.lastIndexOf=s.lastIndexOf,this.forEach=s.forEach,this.map=s.map,this.reduce=s.reduce,this.reduceRight=s.reduceRight,this.load=function(t,e){var i=a[this.$uuid],n=t.length;0<this.__length?this.clear():this.__last||c(this);for(var r=0;r<n;r++)this[r]=h(i,t[r],e);this.__length=n},this.set=function(t,e){var i;if((t|=0)<0&&(t+=this.__length),!(i=this[t]))return!1;i.destroy(),i=h(a[this.$uuid],e),this.__last||c(this),this[t]=i},this.append=function(){var t;0<arguments.length&&(t=i(a[this.$uuid],arguments,0,0),this.__last||c(this),l=!0,s.push.apply(this,t))},this.insert=function(t){var e;1<arguments.length&&(e=this.__length,(t|=0)<0&&(t+=e)<0?t=0:e<t&&(t=e),this.__last||c(this),list=i(a[this.$uuid],arguments,1,2),list[0]=t,list[1]=0,l=!0,s.push.apply(this,list))},this.removeAt=function(t,e){var i,n=this.__length;if((t|=0)<0&&(t+=n)<0)t=0;else if(n<=t)return!1;this.__last||c(this),l=!0;for(var r=(i=s.splice.call(this,t,e||1)).length;r--;)i[r].parent=null;return i},this.remove=function(t){t=this.indexOf(t);0<=t&&this.removeAt(t,1)},this.clear=function(){var t;if(0<this.__length){this.__last||c(this),l=!0;for(var e=(t=s.splice.call(this,0)).length;e--;)t[e].parent=null}},this.sort=function(t){0<this.__length&&(this.__last||c(this),s.sort.call(this,t))},this.reverse=function(){0<this.__length&&(this.__last||c(this),s.reverse.call(this))},this.__insert=function(t,e){this.__last||c(this),l=!0,t<0?e.push.apply(this,e):(e.unshift(t,0),e.splice.apply(this,e))},this.__set=function(t,e){this.__last||c(this),this[t].destroy(),this[t]=e}},function(t){this.$uuid=t&&t.uuid}),yaxi.Control.extend("Box",function(t,i){this.$("layout","",{kind:"class",data:"yx-layout-"}),this.$("children",null,{get:function(){return this.__children},set:function(t){var e=this.__children;0<e.length&&e.clear(),t&&0<t.length&&e.push.apply(e,t)}}),this.$properties.children={convert:function(t){t&&0<t.length&&this.__children.load(t)}},this.__load_children=function(t,e){this.__children.load(t,e)},yaxi.impl.query.call(this),this.__find_related=function(t){var e;if(t){if(e=this.root.findByKey(t)){if(e.$properties.selectedIndex)return e;throw new Error('related "'+t+'" has no selectedIndex property!')}}else if(t=this.parent.__children)for(var i=t.length;i--;)if((e=t[i])&&e.$properties.selectedIndex&&e!==this)return e},this.destroy=function(){for(var t=this.__children,e=t.length;e--;)t[e].destroy();t.__last=null,i.destroy.call(this)}},function(){var t;this.__fields=Object.create(this.$defaults),this.__children=new yaxi.Collection(this),(t=this.init)&&t.apply(this,arguments)}),yaxi.impl.switchbox=function(){function t(){throw new Error("StackBox control doesn't supports layout!")}this.$("layout",{get:t,set:t}),this.$("selectedIndex",0,{force:!0,alias:"selected-index",convert:function(t){return(t|=0)<0?0:t}}),this.$("selectedItem",null,{get:function(){var t=0|this.selectedIndex;return 0<=t&&this.__children[t]||null}}),this.__load_children=function(t,e){this.__children.load(t,e),this.__switch(this,this.selectedIndex,-1)},this.__set_selectedIndex=function(t,e){this.__children[t]&&(this.__switch(this,t,e),this.trigger("change",t,!1))},this.__switch=function(t,e,i){t=t.__children;(i=0<=i&&t[i])&&i.onhide&&i.onhide(),(i=t[e])&&(i.__shown||(i.__shown=!0,i.onload&&i.onload()),i.onshow&&i.onshow())}},yaxi.Component=yaxi.Control.extend(function(t,e,i){var h=Object.create,l=Object.getOwnPropertyNames,o=Array,a=i.Control.build,c=i.pipe.compile,u=i.$controls;function f(t,e,i){if(null!=e){if(t=t&&t.name,"string"==typeof e){if(t)throw new Error('slot input error: named slot can not support string, current slot name "'+t+'"!');return[["text",null,e]]}if(0<e.length){var n,r=[],s=0;if(t)for(;n=e[s++];)n.slot===t&&r.push(n);else for(;n=e[s++];)n.slot||r.push(n);return r}}return i}function d(t,e,i){var n=i.length,r=new o(n+2);r[0]=e,r[1]=1;for(var s=0;s<n;s++)(r[s+2]=a(t,i[s])).__slot=!0;return r}this.__build_get=function(n){var r=i,s=h;return function(){var t,e,i;return(t=r.__bindingTarget)&&((e=this.__observes)?(i=e[n])?i.push(t):e[n]=[t]:(this.__observes=s(null))[n]=[t],(t=u[t])&&((bindings=t.__bindings)?bindings.push(n,this):t.__bindings=[n,this])),this.__fields[n]}},this.__build_set=function(i,t){var n=t.convert;return function(t){var e=this.__fields;(t=n?n.call(this,t):t)!==e[i]&&(e[i]=t,function(t){var e,i,n,r,s;if((e=this.__observes)&&(e=e[t]))for(r=0;i=e[r++];)(n=u[i.control])?(s=i.fn)&&(n[i.property]=s(c)):e.splice(--r,1)}.call(this,i))}},this.__load=function(t,e){var i=this.template;i?"function"==typeof i&&(i=i.call(this)||[]):i=[],t[1]&&this.__load_attributes(t[1]),i[2]&&function t(e,i,n){var r;for(var s=i.length;s--;)(r=i[s])&&("slot"===r[0]?(r=f(r[1],n,r[2]))&&0<r.length&&(r=d(e,s,r),i.splice.apply(i,r)):r[2]&&t(e,r[2],n))}(this,i[2],t[2]),(this.__shadowRoot=a(this,i,e)).__shadow=!0},this.$combineChanges=function(){for(var t,e,i=this.__fields,n=this.__changes,r=this.__shadowRoot,s=this.$properties,o=l(n),a=0;t=o[a++];)switch(i[t]=n[t],s[t].kind){case"class":case"style":case"attribute":(e=e||(r.__changes||(r.__changes=h(null))))[t]=n[t]}},this.$watch=function(t,e){var i,n;t&&"function"==typeof e&&((i=this.__watches)?(n=i[t])?n.push(e):i[t]=[e]:(this.__watches||(this.__watches=h(null)))[t]=[e])},this.$unwatch=function(t,e){var i,n;if(i=this.__watches)if("function"==typeof e){if(n=i[t])for(var r=n.length;r--;)if(n[r]===e)return void n.splice(r,1)}else if(t)(n=i[t])&&0<n.length&&(n.length=0,delete i[t]);else{for(t in i)i[t].length=0;this.__watches=null}},this.$notify=function(t,e){var i,n,r,s;if((i=this.__watches)&&(n=i[t]))for(r=0;s=n[r++];)if(!1===s.call(target,this,e))return!1},this.$unbind=function(t,e){var i=this.__observes;if(i=i&&i[t])for(var n=i.length;n--;)if(i[n].control===e){i.splice(n,1);break}},this.destroy=function(){var t;(t=this.__shadowRoot)&&(t.destroy(),this.__shadowRoot=null),e.destroy.call(this)},i.component=t.extend.bind(t)},function(){var t;this.__fields=Object.create(this.$defaults),(t=this.init)&&t.apply(this,arguments)}),yaxi.Control.extend("DataBox",function(t,i,n){var s=n.Control.build;function e(t){return t||!1!==t&&null}function r(){throw new Error("BataBox control doesn't supports children, please use data and template!")}function o(t){var e=t.__children,t=t.empty;e.clear(),!1!==t&&(t=t?s(this,t):new n.DataEmpty,e.append(t))}function a(t,e,i,n){var r=[];return n=n||function(t){var e;for(;t;){if(e=t.__scope)return e;t=t.parent}return[]}(t),i(function(t,e,i,n,r){e=e.concat(i,n),(r=s(this,r,e))&&(r.__scope=e,t.push(r))}.bind(t,r,n),e,n),r}function h(t,e,i,n){var r=t.__children,n=a(t,e,i,n);r.clear(),0<n.length&&r.load(n)}function l(t,e){var i;!(i=e.__bindings)||0<=(e=i.indexOf(t.uuid))&&i.splice(e,1),t.__model=null}function c(t,e){var i;return t=t.__scope,e=e.__scope,t=t[i=t.length-1].__index,(e=e[i].__index)<t?1:t<e?-1:0}this.$("layout","",{kind:"class",data:"yx-layout-"}),this.$("template",null,{change:!1,get:function(){return this.__template||null},set:function(t){if("function"!=typeof t)throw new Error("databox template must be a template function!");this.__template=t}}),this.$("data",null,{change:!1,get:function(){return this.__data||null},set:function(t){var e;if((e=this.__model)&&e!==t&&l(this,e),t&&(2===t.__model_type&&function(t,e){var i;(i=e.__bindings)?i.push(t.uuid):e.__bindings=[t.uuid];t.__model=e}(this,t),0<t.length))return this.__data=t,void((e=this.__template)&&h(this,t,e));this.__data=null,this.__loaded&&o(this)}}),this.$("loading",null,{change:!1,convert:e}),this.$("empty",null,{change:!1,convert:e}),this.$("children",null,{get:r,set:r}),this.__load_children=function(t,e){var i;(this.template=t)&&((i=this.__data)?h(this,i,t,e):this.showLoading()),this.__loaded=!0},this.showLoading=function(){var t=this.__children,e=this.loading;t.clear(),!1!==e&&(e?e=s(this,e):(e=new n.Loading).center=!0,t.append(this.__loading=e))},this.closeLoading=function(){var t;(t=this.__loading)&&(this.__children.remove(t),this.__loading=null)},this.__on_load=function(t){var e,i;0<t.length&&(e=this.__template)?(0<(i=this.__children).__length&&i.clear(),t=a(this,t,e),this.__children.__insert(-1,t)):o(this)},this.__on_set=function(t,e){var i,n;(i=this.__template)&&0<(n=a(this,[e],i)).length&&this.__children.__set(t,n[0])},this.__on_insert=function(t,e){var i;(i=this.__template)&&(e=a(this,e,i),this.__children.__insert(t,e))},this.__on_removeAt=function(t,e){this.__children.removeAt(t,e)},this.__on_clear=function(){this.__children.clear()},this.__on_sort=function(){this.__children.sort(c)},this.__on_reverse=function(){this.__children.reverse()},n.impl.query.call(this),this.destroy=function(){for(var t=this.__children,e=t.length;e--;)t[e].destroy();(t=this.__model)&&l(this,t),i.destroy.call(this)}},function(){var t;this.__fields=Object.create(this.$defaults),this.__children=new yaxi.Collection(this),(t=this.init)&&t.apply(this,arguments)}),yaxi.Control.extend("DataEmpty",function(t,e){this.$("text","暂无数据")},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Icon",function(t,e){this.$("icon","",{kind:"class",data:"icon-"})},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("IconButton",function(t,e){t.sealed=!0,this.$("layout","",{kind:"class",data:"yx-layout-"}),this.$("icon",""),this.$("size",""),this.$("text",""),this.__load_children=function(t){this.text=t}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Image",function(t,e){this.$("src",""),this.$("mode",""),this.$("lazyLoad",!1,{alias:"lazy-load"})},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("ImageButton",function(t,e){t.sealed=!0,this.$("layout","",{kind:"class",data:"yx-layout-"}),this.$("src",""),this.$("size",""),this.$("text",""),this.__load_children=function(t){this.text=t}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Line",function(t,e){this.$("size","5rem"),this.$("color","text-standard")},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Vline",function(t,e){this.$("size","5rem"),this.$("color","text-standard")},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Loading",function(t,e){this.$("center",!1,{kind:"class",data:"yx-loading-center"})},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Marquee",function(t,e){this.$("text",""),this.$("speed",10)},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("MaskLayer",function(t,e){},function(){yaxi.Control.apply(this,arguments)}),yaxi.component("Pagination",function(t,e){this.$("mode","dot"),this.$("count",0),this.__set_mode=function(t){},this.__set_count=function(t){}},function(){yaxi.Control.apply(this,arguments)}),yaxi.component("Pulldown",function(t,e){var i=["pulldown","pulldown","release","","done"],n=["start","start","release","loading","done"];this.template=function(){var t=this;return["box",{layout:"row middle center",height:0,maxHeight:"100rem",theme:"text-lightest"},[["icon",{fontSize:"60rem",marginRight:"5rem",bindings:{hidden:function(){return 3===t.status},icon:function(){return"common-"+i[t.status]}}}],["slot",null,[["loading",{width:"40rem",height:"40rem",fontSize:"8rem",marginRight:"10rem",bindings:{hidden:function(){return 3!==t.status}}}]]],["text",{bindings:{text:function(){return t[n[t.status]+"Text"]}}}]]]},this.$("status",0),this.$("startText","下拉即可刷新",{change:!1,alias:"start-text"}),this.$("releaseText","松开立即刷新",{change:!1,alias:"release-text"}),this.$("loadingText","正在加载, 请稍候...",{change:!1,alias:"loading-text"}),this.$("doneText","加载完毕",{change:!1,alias:"done-text"}),this.release=function(){switch(this.status){case 1:this.transition="height 600ms ease",this.height="0px";break;case 2:this.status=3,this.trigger("pulldown")}},this.done=function(){1<this.status&&(this.status=4,this.transition="height 600ms ease",this.height=0)}},function(){yaxi.Control.apply(this,arguments)}),yaxi.component("Pullup",function(t,e){this.template=function(){var t=this;return["box",{layout:"row middle center",height:"100rem",theme:"text-lightest"},[["icon",{icon:"common-done",fontSize:"60rem",marginRight:"5rem",bindings:{hidden:function(){return!t.status}}}],["slot",null,[["loading",{width:"40rem",height:"40rem",fontSize:"8rem",marginRight:"10rem",bindings:{hidden:function(){return t.status}}}]]],["text",{bindings:{text:function(){return t.status?t.doneText:t.loadingText}}}]]]},this.$("status",0),this.$("loadingText","正在加载, 请稍候...",{change:!1,alias:"loading-text"}),this.$("doneText","已全部加载完毕",{change:!1,alias:"done-text"}),this.start=function(){this.status=0,this.trigger("pullup")},this.done=function(){this.status=1}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("RichText",function(t,e){this.$("html","")},function(){yaxi.Control.apply(this,arguments)}),yaxi.Box.extend("ScrollBox",function(t,e,r){var s,o,a;this.$("pulldownHeight",80,!1),this.$("pullupHeight",20,!1),this.scrollTop=0,this.scrollLeft=0,this.scrollWidth=0,this.scrollHeight=0,this.scrollTo=function(t){this.$set("scrollTo",0|t)},this.scrollIntoView=function(t){t&&this.$set("scrollIntoView",t.uuid)},this.__on_touchstart=function(){(s=this.__children[0])&&s instanceof r.Pulldown?(o=-1,a=this.pulldownHeight*r.remRatio|0,s.transition="",s.height=0):s=null},this.__on_touchmove=function(t){var e,i,n;s&&(n=t.changedTouches)&&(n=n[0])&&(this.scrollTop<=0?(n=0|n.pageY,o<0||n<=o?o=n:(e=(n-=o)<a?1:2,i=n+"px")):o=-1,s.status=e||0,s.height=i||"0px")},this.__on_touchend=function(){var i,t,n;(i=s)&&(s=null,0<i.status)?i.release():(t=this.__children,(i=t[t.length-1])&&i instanceof r.Pullup&&(n=this.pullupHeight*r.remRatio,r.boundingClientRects([this,i],function(t,e){e.top+n<t.height&&i.start()})))}},function(){yaxi.Box.call(this)}),yaxi.Box.extend("SlideBox",function(e,t){function i(t){var e=this.selectedIndex+1,t=this.interval;e>=this.__children.length&&(e=0),this.selectedIndex=e,0<t&&(this.__auto=setTimeout(i.bind(this),t))}e.allowParent=function(t){if(t instanceof e)throw new Error("slidebox cannot be added to slidebox!");return!0},yaxi.impl.switchbox.call(this),this.$("autoplay",!1,{force:!0,change:!1}),this.$("interval",5e3,!1),this.$("duration",500,!1),this.__set_autoplay=function(t){var e;clearTimeout(this.__auto),t&&0<(e=this.interval)&&(this.__auto=setTimeout(i.bind(this),e))};var o={start:-1,index:0,last:0,move:0,width:0,change:0,capture:0,time:0};function a(t){t=t.changedTouches;return(t=t&&t[0])?0|t.pageX:-1}this.__on_touchstart=function(t){var e,i,n=o;n.capture||(e=-1,0<=(i=this.__children.length-1)&&(n.move=0,n.last=i,0<=(e=a(t))&&this.boundingClientRect(function(t){(n.width=t.width)<=0&&(e=-1)})),n.start=e,n.time=new Date,n.capture=1)},this.__on_touchmove=function(t){var e=o;if(0<=e.start){if(!e.move&&!1===function(t,e,i){var n=i.distanceX,i=i.distanceY;if(n<0&&(n=-n),i<0&&(i=-i),4<=(i=n-i))e.move=1,e.index=t.selectedIndex,t.__start();else if(i<=-4)return!1}(this,e,t))return void(e.start=-1);var i=e.index,n=a(t)-e.start,r=e.width>>1,s=e.change;return n<-r?!s&&i<e.last&&(e.change=1,this.trigger("transition",i+1,!1)):r<n?!s&&0<i&&(e.change=-1,this.trigger("transition",i-1,!1)):s&&(e.change=0,this.trigger("transition",i,!1)),0<i&&(n+=-i*e.width),this.__move(n),t.stop(),!1}},this.__on_touchend=function(t){var e=o;if(e.capture=0,e.move)return this.__stop(e.change||function(t,e){if(new Date-t.time<500){var i=e.distanceX,e=100*yaxi.remRatio;if(i<-e){if(t.index<t.last)return 1}else if(e<i&&0<t.index)return-1}}(e,t)),t.stop(),!1},this.__on_touchcancel=function(){o.capture=0},this.__on_change=function(t){return this.selectedIndex=t,!1},this.__start=this.__move=function(){},this.__stop=function(t){}},function(){yaxi.Box.apply(this,arguments)}),yaxi.Box.extend("StackBox",function(t,e){this.$("duration",500),yaxi.impl.switchbox.call(this)},function(){yaxi.Box.apply(this,arguments)}),yaxi.Box.extend("SwitchBox",function(t,e,i){i.impl.switchbox.call(this),this.__switch=function(t,e,i){t=t.__children;(i=0<=i&&t[i])&&(i.onhide&&i.onhide(),i.hidden=!0),(i=t[e])&&(i.__shown||(i.__shown=!0,i.onload&&i.onload()),i.onshow&&i.onshow(),i.hidden=!1)}},function(){yaxi.Box.apply(this,arguments)}),yaxi.Box.extend("TabBar",function(t,e){function i(t,e){var i;(i=t.__find_related(t.related))&&(i.selectedIndex=e),t.changeSelected(e)}this.$("related","",!1),this.$("selectedIndex",0,{force:!0,change:!1,alias:"selected-index",convert:function(t){return(t|=0)<0?-1:t}}),this.$("selectedItem",null,{get:function(){var t=this.selectedIndex;return 0<=t&&this.__children[t]||null}}),this.changeSelected=function(t){for(var e,i=this.__children,n=i.length;n--;)n!==t&&(e=i[n])&&e.selected&&(e.selected=!1);(e=i[t])&&(e.selected=!0)},this.__set_selectedIndex=function(t,e){this.__children[t]&&i(this,t),this.trigger("change",t,!1)},this.__load_children=function(t,e){this.__children.load(t,e),i(this,this.selectedIndex)},this.__on_touchend=function(t){t=this.parentToThis(t.target);!t||t.selected||0<=(t=this.__children.indexOf(t))&&!1!==this.trigger("changing",{index:t,lastIndex:this.selectedIndex})&&(this.selectedIndex=t)}},function(){yaxi.Box.apply(this,arguments)}),yaxi.Control.extend("Text",function(t,e){var i=yaxi.pipe.compile;this.$("text",""),this.$("security",""),this.$("format",null,!1),this.__set_format=function(t){this.__format="function"==typeof t?t:i(t)},this.__load_children=function(t){this.text=t}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("TextBox",function(){var e=yaxi.pipe.compile;this.$("name",""),this.$("value",""),this.$("placeholder",""),this.$("maxlength",-1),this.$("pattern",""),this.$("format",null,!1),this.__set_format=function(t){this.__format="function"==typeof t?t:e(t)},this.$("selectionStart",0,{alias:"selection-start"}),this.$("selectionEnd",0,{alias:"selection-end"}),this.$("disabled",!1),this.focus=function(){this.$renderer.focus(this)},this.__on_change=function(t){this.$push(t)}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Button",function(t,i){var n,s=Array,o=yaxi.Control.build;this.$("text",""),this.__set_text=function(t){this.content(t)},this.$("disabled",!1),this.content=this.__load_children=function(t){var e;if((e=this.__shadows)&&"object"==typeof e)for(var i=e.length;i--;)e[i].destroy();if(t instanceof s){if(n)throw new Error("load button error: button can not embed button!");try{n=!0,t[0]instanceof s?t=function(t,e){for(var i=e.length,n=new s(i),r=0;r<i;r++)n[r]=o(t,e[r]),n[r].__shadow=!0;return n}(this,t):(t=[o(this,t)])[0].__shadow=!0,this.__fields.text=""}finally{n=!1}}else this.__fields.text=t=""+t;this.__shadows=t},this.destroy=function(){var t=this.__shadows;if(t&&"string"!=typeof t)for(var e=t.length;e--;)t[e].destroy();i.destroy.call(this)}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("CheckBox",function(t,e){this.$("name",""),this.$("text",""),this.$("checked",!1),this.__set_checked=function(t){this.$push(t),this.trigger("change",t)},this.$("color",""),this.$("disabled",!1),this.__on_tap=function(){var t=!this.checked;!1!==this.trigger("changing",t)&&(this.checked=t)}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Box.extend("CheckGroup",function(t,e){},function(){yaxi.Box.apply(this,arguments)}),yaxi.Box.extend("Form",function(t,e){},function(){yaxi.Box.apply(this,arguments)}),yaxi.Control.extend("Memo",function(){this.$("name",""),this.$("value",""),this.$("placeholder",""),this.$("text",""),this.$("disabled",!1)},function(){yaxi.Control.apply(this,arguments)}),yaxi.TextBox.extend("NumberBox",function(){this.$("name",""),this.$("button",!1),this.$("value",0,{convert:function(t){var e;return(t=+t||0)<(e=this.min)||t>(e=this.max)?e:t}}),this.$("min",-1/0,!1),this.$("max",1/0,!1),this.$("step",1)},function(){yaxi.Control.apply(this,arguments)}),yaxi.TextBox.extend("PasswordBox",function(){},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("Radio",function(t,e){t.allowParent=function(t){return t instanceof yaxi.RadioGroup},this.$("text",""),this.$("checked",!1),this.$("color",""),this.$("disabled",!1),this.__set_checked=function(t){this.$push(t),this.trigger("change",t)}},function(){yaxi.Control.apply(this,arguments)}),yaxi.Box.extend("RadioGroup",function(t,e){function n(t,e){for(var i=t.length;i--;){var n=t[i];n.key===e?n.checked=!0:n.checked&&(n.checked=!1)}}this.$("name",""),this.$("value",""),this.__set_value=function(t){n(this.__children,t),this.$push(t)},this.__load_children=function(t,e){var i=this.__children;i.load(t,e),n(i,this.value)},this.__on_tap=function(t){t=t.target;if(t.parent===this&&!t.checked){for(var e=this.children,i=e.length;i--;)if(e[i].checked){if(!1===e[i].trigger("changing",!1))return!1;break}if(!1===t.trigger("changing",!0))return!1;if(!(this.value=t.key))throw new Error("radio control must set key!")}}},function(){yaxi.Box.apply(this,arguments)}),yaxi.Control.extend("RichEdit",function(t,e){this.$("disabled",!1)},function(){yaxi.Control.apply(this,arguments)}),yaxi.Control.extend("SwitchButton",function(t,e){this.$("name",""),this.$("checked",!1),this.$("disabled",!1)},function(){yaxi.Control.apply(this,arguments)}),yaxi.TextBox.extend("TextArea",function(){this.$("disabled",!1)},function(){yaxi.Control.apply(this,arguments)}),yaxi.Box.extend("Page",function(t,e){function i(t,e){yaxi.openPage(this,t,e)}t.allowParent=!1,this.__find_up=function(){return null},this.$("full",!1,!1),this.onload=function(t){},this.onshow=function(){},this.onhide=function(){},this.onunload=function(t){},this.close=function(t,e){yaxi.closePage(t,e)},this.__class_init=function(t){e.__class_init.call(this,t),t.open=i}},function(){yaxi.Box.apply(this,arguments)}),yaxi.Page.extend("Dialog",function(t,e,i){},function(){yaxi.Box.apply(this,arguments)}),yaxi.MessageBox=yaxi.Dialog.extend(function(a){function h(t){this.close(t.target.key)}a.sealed=!0,a.buttons={OK:"确定",Cancel:"取消",Yes:"是",No:"否",Agree:"同意",Refuse:"拒绝"},this.init=function(t){var e,i,n;if(t?"object"!=typeof t&&(t=""+t):t={},"string"==typeof(e=t.title||a.title||"yaxi")&&(e=["text",{height:"120rem",lineHeight:"120rem",textAlign:"center",fontWeight:"bold"},e]),"string"==typeof(i=t.content)&&(i=["text",{padding:"20rem 50rem 80rem"},i]),"string"==typeof(n=t.buttons||"OK,Cancel"))for(var r=a.buttons,s=(n=n.split(",")).length-1,o=1+s;o--;)n[o]=["text",{key:n[o],minWidth:"180rem",height:"80rem",lineHeight:"80rem",theme:o===s?"text-primary":"",textAlign:"center",fontWeight:"bold",events:{tap:h.bind(this)}},r[n[o]]];this.load(["",null,[["masklayer",{key:"Cancel",events:{tap:h.bind(this)}}],["box",{theme:"bg-standard line-lighter line-top",absolute:"middle center",width:"90%",minHeight:"250rem",maxHeight:"80%",layout:"column"},[e,i,["box",{layout:"row middle after",theme:"line-lightest line-top",minHeight:"120rem",padding:"0 50rem"},n]]]]])},a.delete=function(t,e){"function"==typeof t&&(e=t,t=""),this.open({title:"确认删除",content:"确认要删除"+(t||"")+"?"},e)},a.info=function(t){this.open({title:"提醒",content:t,buttons:"OK"})}}),yaxi.component("Header",function(e,t,i){e.text="yaxi",e.allowParent=function(t){if(t instanceof i.Page)return!0;throw new Error("Header can only add to Page or Dialog!")},this.template=function(){var t=this;return["box",{layout:"row middle",theme:"bg-standard line-lightest line-bottom",height:"90rem",paddingLeft:"20rem"},[["icon",{icon:"common-back",width:"90rem",height:"100%",marginLeft:"-20rem",hidden:i.currentPages.length<1,events:{tap:function(){return this.root.close("Back"),!1}}}],["slot",null,[["text",{bindings:{text:function(){return t.text||e.text||""}}}]]]]]},this.$("text","")},function(){yaxi.Component.apply(this,arguments)}),function(t){var e=t.h5=Object.create(null);t.platform="h5",e.weixin=0<=navigator.userAgent.toLowerCase().indexOf("micromessenger"),t.getSystemInfo=function(t){var e=window,i=navigator,n=screen,r=e.orientation;t&&t({deviceOrientation:180==r||0==r?"portrait":"landscape",language:i.language,pixelRatio:e.devicePixelRatio,platform:i.platform,screenHeight:n.height,screenWidth:n.width,statusBarHeight:0,system:i.appName,version:i.appVersion,windowHeight:e.innerWidth,windowWidth:e.innerHeight})}}(yaxi),function(i){var t=i.__view_host=document.createElement("div");t.className="yx-host",document.body?document.body.appendChild(t):document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(t)}),document.documentElement.style.fontSize=(i.remRatio=(1e4*window.innerWidth/750|0)/1e4)+"px";var n,r,s,o=i.$controls,a=i.Event,e=t.addEventListener.bind(t),h=!1,l=null,c=new Date;function u(t){for(var e,i;t;){if((i=t.id)&&(e=o[i.substring(3)]))return e.disabled?e.parent||null:e;t=t.parentNode}return null}function f(t){var e=new a(t.type);return e.target=n,e.changedTouches=_(t.changedTouches),e.touches=_(t.touches),e}function d(t){var e,i=s,n=t.changedTouches;return t=f(t),(i=i&&i[0])&&n&&(n=n[0])&&(e=n.pageX-i.pageX,i=n.pageY-i.pageY,t.distanceX=e,t.distanceY=i,t.move=e<-10||10<e||i<-10||10<i),t}function _(t){for(var e=t.length,i=new Array(e);e--;){var n=t[e];i[e]={identifier:n.identifier,pageX:n.pageX,pageY:n.pageY,clientX:n.clientX,clientY:n.clientY}}return i}function p(t){var e;if(e=u(t.target))return e.trigger(t.type)}function y(t,e,i){for(var n;t;){if((n=t[e])&&!1===n.call(t,i))return!1;t=t.parent}}e("touchstart",function(t){var e;if((e=u(t.target))&&(n=e,r=new Date,h=!0,t=f(t),s=t.changedTouches,!1===y(e,"__on_touchstart",t)||!1===e.trigger(t)))return h=!1},!0),e("touchmove",function(t){var e;return!(e=n)||!1!==y(e,"__on_touchmove",t=d(t))&&!1!==e.trigger(t)?!i.h5.weixin&&void 0:h=!1},!0),e("touchend",function(t){var e,i;if(e=n){if(t=d(t),n=null,!1===y(e,"__on_touchend",t)||!1===e.trigger(t)||t.move)return!1;if(350<(i=new Date)-r&&!(t.type="longpress")===e.trigger(t))return!1;h&&(200<i-c||l!==e)&&setTimeout(function(){if(l=e,c=i,!(t.type="tap")===y(e,"__on_tap",t)||!1===e.trigger(t))return!1},0)}},!0),e("touchcancel",function(t){var e;if((e=n)&&(t=f(t),n=null,!1===y(e,"__on_touchcancel",t)||!1===e.trigger(t)))return!1},!0),e("input",function(t){var e,i;if(e=u(t.target))return i=t.target.value,(!(t=e.__on_input)||!1!==t.call(e,i))&&e.trigger("input",i)},!0),e("change",function(t){var e,i;if(e=u(t.target))return i=t.target.value,(!(t=e.__on_change)||!1!==t.call(e,i))&&e.trigger("change",i)},!0),e("keydown",p,!0),e("keypress",p,!0),e("keyup",p,!0),e("blur",p,!0),e("focus",function(t){if(t=u(t.target))return t.trigger("focus")},!0),e("scroll",function(t){var e=t.target;if(t=u(e))return t.scrollTop=e.scrollTop,t.scrollLeft=e.scrollLeft,t.scrollWidth=e.scrollWidth,t.scrollHeight=e.scrollHeight,t.trigger("scroll")},!0),window.addEventListener("resize",function(){var t=document.activeElement;t&&this.innerHeight/this.innerWidth<1.2&&t.scrollIntoViewIfNeeded()})}(yaxi),yaxi.__ajax_send=function(t){var e,i,n=new yaxi.Stream,r=new XMLHttpRequest;if(t.CORS&&("withCredentials"in r?r.withCredentials=!0:(i=window.XDomainRequest)&&(r=new i)),r.onreadystatechange=function(){4===this.readyState&&(this.onreadystatechange=null,e&&(clearTimeout(e),100<=this.status&&this.status<300?n.resolve(this.responseText||this.responseXML):n.reject({url:t.url,status:this.status||600,message:this.statusText||this.responseText,options:t})))},r.open(t.method,t.url,!1!==t.async),t.contentType&&r.setRequestHeader("Content-Type",t.contentType),i=t.header)for(var s in i)r.setRequestHeader(s,i[s]);return e=setTimeout(function(){e=0,r.abort(),n.reject({url:t.url,status:601,message:"ajax request timeout"})},t.timeout),r.send(t.data),n},yaxi.Control.renderer(function(t,e){var o=Object.assign,a=document.createElement("div");function i(t,e){t=t.getBoundingClientRect();e({left:t.left,top:t.top,width:t.width,height:t.height,right:t.right,bottom:t.bottom})}this.template=function(t){t&&(this.__html_template=t,this.__dom_template=null)},this.__html_template='<div class="@class"></div>',this.className="yx-control",this.renderClasses=function(t,e,i,n,r){r.className=this.className+i.slice(0,n).join("")},this.renderSplitClasses=function(t,e,i,n,r){for(var s,o=0;o<n;o++){if("layout"===e[o].name){s=i[o],i[o]="";break}}return r.className=this.className+i.slice(0,n).join(""),s||""},this.renderStyles=function(t,e,i,n,r){for(var s=r.style,o=0;o<n;o++)s[e[o].name]=i[o]},this.renderSplitStyles=function(t,e,i,n,r,s){for(var o=r.style,a=s.style,h=0;h<n;h++)(e[h].layout?o:a)[e[h].name]=i[h]},this.renderAttributes=function(t,e,i,n,r){for(var s,o,a=0;a<n;a++)(s=this[o=(s=e[a]).name||s])?s.call(this,t,r,i[a]):!1!==s&&(r[o]=i[a])},this.render=function(t,e){var i,n,r,s=t.$view;return s||((s=t.$view=(i=this,(n=(r=(n=t).constructor).__dom_template)?n.cloneNode(!0):(a.innerHTML=i.__html_template.replace("@class",i.className),n=a.firstChild,a.removeChild(n),(r.__dom_template=n).cloneNode(!0)))).id="id-"+(e||t.uuid),(r=t.__on_mount)&&(t.__on_mount=null,r.call(t,s))),t.__dirty=!1,(n=t.__changes)&&(o(e=t.__fields,n),(r=(n=t.__get_changes(e))[0])&&this.renderClasses(t,n[1],n[2],r,s),(r=n[3])&&this.renderStyles(t,n[4],n[5],r,s),(r=n[6])&&this.renderAttributes(t,n[7],n[8],r,s),t.__changes=null),s},this.renderChildren=function(t,e){for(var i,n=0;i=e[n++];)t.appendChild(i.$view||i.$renderer.render(i))},this.patch=function(t,e){var i,n,r;t.__dirty=!1,(n=t.__changes)&&(o(i=t.__fields,n),(r=(n=t.__get_changes(n))[6])&&this.renderAttributes(t,n[7],n[8],r,e),(0<n[0]||0<n[3])&&(i=t.__get_changes(i),0<n[0]&&(r=i[0])&&this.renderClasses(t,i[1],i[2],r,e),0<n[3]&&(r=i[3])&&this.renderStyles(t,i[4],i[5],r,e)),t.__changes=null)},this.patchChildren=function(t,e,i){var n,r;if(n=i.__last)i.__last=null,(r=0<n.length)&&(r=t.destroyChildren(n)),r?function(t,e){var i,n,r=t.firstChild,s=0;for(;i=e[s++];)(n=i.$view)?(i.__dirty&&i.$renderer.patch(i,n),n!==r?t.insertBefore(n,r):r=r.nextSibling):t.insertBefore(i.$renderer.render(i),r);for(;r;)r=(n=r).nextSibling,t.removeChild(n)}(e,i):(e.textContent="",this.renderChildren(e,i));else if(0<(r=i.length))for(var s=0;s<r;s++)(t=i[s])&&t.__dirty&&(e=t.$view)&&t.$renderer.patch(t,e)},this.hidden=function(t,e,i){e.style.display=i?"none":""},this.disabled=function(t,e,i){i?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")},e.boundingClientRect=function(e){var t;e&&((t=this.$view)?i(t,e):control.__on_mount=function(t){setTimeout(function(){i(t,e)},0)})}}),yaxi.Box.renderer(function(i){this.className="yx-control yx-box",this.render=function(t){var e=i.render.call(this,t),t=t.__children;return t.__last=null,this.renderChildren(this.getChildrenView(e),t),e},this.patch=function(t,e){this.patchChildren(t,this.getChildrenView(e),t.__children),i.patch.call(this,t,e)},this.getChildrenView=function(t){return t}}),yaxi.Component.renderer(function(t){this.render=function(t){var e=t.__shadowRoot;return t.__dirty=!1,t.__changes&&(t.$combineChanges(),t.__changes=null),t.$view=e.$renderer.render(e,t.uuid)},this.patch=function(t,e){var i=t.__shadowRoot;t.__dirty=!1,t.__changes&&(t.$combineChanges(),t.__changes=null),i.$renderer.patch(i,e)}}),yaxi.DataBox.renderer(function(i){this.className="yx-control yx-databox",this.render=function(t){var e=i.render.call(this,t),t=t.__children;return t.__last=null,this.renderChildren(e,t),e},this.patch=function(t,e){this.patchChildren(t,e,t.__children),i.patch.call(this,t,e)}}),yaxi.DataEmpty.renderer(function(t){this.className="yx-control yx-dataempty",this.template('<div class="@class"><div class="yx-icon icon-common-nodata"></div><div class="yx-dataempty-text">暂无数据</div></div>'),this.text=function(t,e,i){e.lastChild.textContent=i}}),yaxi.Icon.renderer(function(t){this.className="yx-control yx-icon"}),yaxi.IconButton.renderer(function(t){this.className="yx-control yx-iconbutton",this.template('<div class="@class"><div></div><div class="yx-iconbutton-content"></div></div>'),this.icon=function(t,e,i){e.firstChild.className="yx-iconbutton-icon iconfont"+(i?" icon-"+i:"")},this.size=function(t,e,i){e.firstChild.style.fontSize=0<i?i+"rem":i},this.text=function(t,e,i){e.lastChild.textContent=i}}),yaxi.Image.renderer(function(t){this.className="yx-control yx-image",this.template('<image class="@class"></image>'),this.src=function(t,e,i){e.src=i}}),yaxi.ImageButton.renderer(function(t){this.className="yx-control yx-imagebutton",this.template('<div class="@class"><div class="yx-imagebutton-image"></div><div class="yx-imagebutton-content"></div></div>'),this.src=function(t,e,i){e.firstChild.style.backgroundImage=i?"url("+i+")":""},this.size=function(t,e,i){e=e.firstChild.style;e.width=e.height=i},this.text=function(t,e,i){e.lastChild.textContent=i}}),yaxi.Line.renderer(function(t){var n=yaxi.color;this.className="yx-control yx-line",this.size=function(t,e,i){e.style.width=i},this.color=function(t,e,i){e.style.backgroundColor=n[i]||i}}),yaxi.Vline.renderer(function(t){var n=yaxi.color;this.className="yx-control yx-vline",this.size=function(t,e,i){e.style.height=i},this.color=function(t,e,i){e.style.backgroundColor=n[i]||i}}),yaxi.Loading.renderer(function(t){this.className="yx-control yx-loading",this.template('<div class="@class">'+function(){for(var t=new Array(12),e=1;e<13;e++)t.push('<div class="yx-loading-dot yx-loading-dot'+e+' icon-common-dot"></div>');return t.join("")}()+"</div>")}),yaxi.Marquee.renderer(function(t){this.className="yx-control yx-marquee",this.template('<div class="@class"><div class="yx-marquee-content"></div></div>'),this.text=function(t,e,i){},this.speed=function(t,e){this.text.call(this,t,e,t.text)}}),yaxi.MaskLayer.renderer(function(t){this.className="yx-control yx-masklayer"}),yaxi.ScrollBox.renderer(function(t,e){this.className="yx-control yx-box yx-scrollbox",e.scrollTo=function(t){var e;(e=this.$view)&&(e.scrollTop=0|t)},e.scrollIntoView=function(t){var e,i;(e=this.$view)&&(i=t&&t.$view)&&e.scrollIntoView(i)}}),yaxi.SlideBox.renderer(function(t,e,i){this.className="yx-control yx-box yx-slidebox",this.template('<div class="@class"><div class="yx-slidebox-body"></div></div>'),this.getChildrenView=function(t){return t.firstChild},this.selectedIndex=function(t,e,i){t=t.duration,e=e.firstChild.style;e.transition=t?"transform "+t+"ms ease":"",e.transform="translateX(-"+i+"00%)"},e.__start=function(){var t=this.$view.firstChild;t.style.transition="",t.className="yx-slidebox-body yx-noscroll"},e.__move=function(t){this.$view.firstChild.style.transform="translateX("+t+"px)"},e.__stop=function(t){var e=this.$view;t?this.selectedIndex+=t:this.$renderer.selectedIndex(this,e,this.selectedIndex),e.firstChild.className="yx-slidebox-body"}}),yaxi.StackBox.renderer(function(t){this.className="yx-control yx-box yx-stackbox",this.template('<div class="@class"><div class="yx-stackbox-body"></div></div>'),this.getChildrenView=function(t){return t.firstChild},this.selectedIndex=function(t,e,i){t=t.duration,e=e.firstChild.style;e.transition=t?"transform "+t+"ms ease":"",e.transform="translateX(-"+i+"00%)"},this.duration=!1}),yaxi.TabBar.renderer(function(t){this.className="yx-control yx-box yx-tabbar"}),yaxi.Text.renderer(function(t){this.className="yx-control yx-text",this.template('<span class="@class"></span>'),this.text=function(t,e,i){t.__security||(e.textContent=(t=t.__format)?t(i):i)},this.security=function(t,e,i){(t.__security=i)?e.textContent=i:e.textContent=(e=t.__format)?e(t.text):t.text}}),yaxi.Button.renderer(function(i){function n(t,e){t=t.__shadows||"";"string"==typeof t?e.textContent=t:(e.textContent="",this.renderChildren(e,t))}this.className="yx-control yx-button",this.render=function(t){var e=i.render.call(this,t);return n.call(this,t,e),e},this.text=function(t,e){n.call(this,t,e)}}),yaxi.CheckBox.renderer(function(t){this.className="yx-control yx-checkbox",this.template('<div class="@class"><div class="yx-icon icon-common-checkbox-unchecked"></div><div class="yx-checkbox-content"></div></div>'),this.checked=function(t,e,i){e.firstChild.className="yx-icon icon-common-checkbox-"+(i?"checked":"unchecked")},this.text=function(t,e,i){e.lastChild.textContent=i}}),yaxi.Memo.renderer(function(t){this.className="yx-control yx-memo",this.focus=function(t){(t=t.$view)&&t.focus()},this.blur=function(t){(t=t.$view)&&t.blur()},this.template('<span class="@class"><textarea></textarea></span>'),this.value=function(t,e,i){e.firstChild.value=i},this.placeholder=function(t,e,i){e.firstChild.placeholder=i}}),yaxi.NumberBox.renderer(function(t){this.className="yx-control yx-numberbox"}),yaxi.PasswordBox.renderer(function(t){this.className="yx-control yx-passwordbox"}),yaxi.Radio.renderer(function(t){this.className="yx-control yx-radio",this.template('<div class="@class"><div class="yx-icon icon-common-radio-unchecked"></div><div class="yx-radio-content"></div></div>'),this.checked=function(t,e,i){e.firstChild.className="yx-icon icon-common-radio-"+(i?"checked":"unchecked")},this.text=function(t,e,i){e.lastChild.textContent=i}}),yaxi.SwitchButton.renderer(function(t){this.className="yx-control yx-switchbutton"}),yaxi.TextBox.renderer(function(t){this.className="yx-control yx-textbox",this.template('<input type="text" class="@class" />'),this.value=function(t,e,i){(t=t.__format)&&(i=t(i)),e.value=i},this.placeholder=function(t,e,i){e.setAttribute("placeholder",i)},this.maxlength=function(t,e,i){e.setAttribute("maxlength",i)},this.pattern=function(t,e,i){e.setAttribute("pattern",i)},this.selectionStart=function(t,e,i){e.selectionStart=i},this.selectionEnd=function(t,e,i){e.selectionEnd=i},this.focus=function(t){t.$view.focus()}}),yaxi.Page.renderer(function(t,e,i){var n=Object.defineProperty,s=[],o=i.__view_host;this.className="yx-control yx-box yx-page",this.template('<div class="@class"></div>'),n(i,"currentPages",{get:function(){return s.slice()}}),n(i,"currentPage",{get:function(){return s[s.length-1]||null}}),i.openPage=function(t,e,i){var n,r=s;"function"==typeof e&&(i=e,e=null),(n=r[r.length-1])&&n.onhide(),r.push(n=new t(e)),n.onload(n.options=e),n.__cb=i,n.onshow(),o.appendChild(n.$renderer.render(n))},i.closePage=function(t,e){var i,n=s,r=n[n.length-1];!1!==r.onunload(r.options)&&((i=r.$view)&&(o.removeChild(i),i.textContent=""),r.options=null,r.destroy(),r.__shrink_uuid(),n.pop(),(i=r.__cb)&&(r.__cb=null,i(t,e)),(r=n[n.length-1])&&r.onshow())},i.__on_page_patch=function(t){for(var e,i,n=0;e=t[n++];)(i=e.$view)&&e.$renderer.patch(e,i)}}),yaxi.Dialog.renderer(function(t){this.className="yx-control yx-box yx-dialog"}),yaxi.exports=null;